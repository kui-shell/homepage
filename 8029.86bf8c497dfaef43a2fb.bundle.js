(self.webpackChunkkui_shell=self.webpackChunkkui_shell||[]).push([[8029],{5648:(n,t,e)=>{"use strict";e.d(t,{ZP:()=>g,or:()=>h,gA:()=>p});var o=e(51173),i=e(19945);var c=function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function r(n){try{s(o.next(n))}catch(n){c(n)}}function a(n){try{s(o.throw(n))}catch(n){c(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,a)}s((o=o.apply(n,t||[])).next())}))};const r=(0,o.i18n)("plugin-kubectl","logs");function a(n){return t=>c(this,void 0,void 0,(function*(){const e=(0,i.fY)(t);if((0,i.lN)(t))return(0,i.t$)("k"===e?"kubectl":e,t);if(t.execOptions.raw)return(0,i.d1)(t,void 0,e);if(t.execOptions.type===o.ExecType.TopLevel){if("exec"===n){const n=t.argvNoOptions.indexOf("exec"),o=t.argvNoOptions[n+2];if("cat"===o||"ls"===o||"pwd"===o||"mv"===o||"cp"===o||"ln"===o)return(0,i.d1)(t,void 0,e)}const o=(0,i.Z7)(t);if(o){const n=(0,i.QG)(t,`${e} get pod -l ${o} -o json`);return t.REPL.qexec(n,void 0,void 0,{tab:t.tab})}{const o=t.argvNoOptions.indexOf(n),c=t.argvNoOptions[o+1];if(c){const n=(0,i.QG)(t,`${e} get pod ${c} -o yaml`);return t.REPL.qexec(n,void 0,void 0,{tab:t.tab})}return(0,i.d1)(t,void 0,e)}}return(0,i.fF)(t)}))}function s(n,t,e){return c(this,void 0,void 0,(function*(){return Object.assign({},yield(0,i.Kz)(t,Object.assign({apiVersion:"v1",kind:"Pod"},e)),{defaultMode:n,argsForMode:t})}))}function u(n){return(t,e)=>c(this,void 0,void 0,(function*(){if((0,i.Bv)(e,i.k1)||(0,i.Xk)(e))return function(n,t,e){return c(this,void 0,void 0,(function*(){const c=(0,o.flatten)(e.map((n=>n.spec.containers.map((t=>Object.assign({},t,{name:`${n.metadata.name}:${t.name}`})))))),r=(0,i.ZO)(t,"logs"),a=r&&e.find((n=>n.spec.containers.find((n=>n.name===r)))),u=a?a.metadata.name:void 0;e[0].isSimulacrum=!0,e[0].spec.containers=c;const f=e.map((n=>n.metadata.name)).join(", ");e[0].metadata.name=f;const d=yield s(n,t,e[0]);if(u){const n=`${u}:${r}`;d.argsForMode.parsedOptions.c=d.argsForMode.parsedOptions.container=n}else if(r){const n=new Error("Specified container not found");throw n.code=404,n}return d}))}(n,t,e.items);if((0,i.oe)(e)){const n=new Error(r("No matching pods"));throw n.code=404,n}return(0,i.k1)(e)?s(n,t,e):void 0}))}const f=a("logs"),d=Object.assign({},(0,i.id)(["p","previous","f","follow"]),{viewTransformer:u("logs")}),l=a("exec"),v=Object.assign({},i.pb,{viewTransformer:u("terminal")});function p(n,t){n.listen(`/kubeui/${t}/logs`,f,d)}function h(n,t){n.listen(`/kubeui/${t}/exec`,l,v)}const g=n=>{["kubectl","k"].forEach((t=>{p(n,t),h(n,t)}))}},78029:(n,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>v});var o=e(19945),i=function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function r(n){try{s(o.next(n))}catch(n){c(n)}}function a(n){try{s(o.throw(n))}catch(n){c(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,a)}s((o=o.apply(n,t||[])).next())}))};var c=function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function r(n){try{s(o.next(n))}catch(n){c(n)}}function a(n){try{s(o.throw(n))}catch(n){c(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,a)}s((o=o.apply(n,t||[])).next())}))};var r=function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function r(n){try{s(o.next(n))}catch(n){c(n)}}function a(n){try{s(o.throw(n))}catch(n){c(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,a)}s((o=o.apply(n,t||[])).next())}))};var a=e(5648);const s="oc";var u=e(51173),f=function(n,t,e,o){return new(e||(e=Promise))((function(i,c){function r(n){try{s(o.next(n))}catch(n){c(n)}}function a(n){try{s(o.throw(n))}catch(n){c(n)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,a)}s((o=o.apply(n,t||[])).next())}))};const d=(0,u.i18n)("plugin-kubectl"),l=n=>/^(oc|odo)$/.test(n),v=n=>{(n=>{n.listen(`/${o.zh}/oc/apply`,(0,o.Dq)("apply",s),o.pb),n.listen(`/${o.zh}/oc/create`,(0,o.Dq)("create",s),o.pb),n.listen(`/${o.zh}/oc/delete`,(0,o.q1)(s),o.pb),n.listen(`/${o.zh}/oc/run`,(0,o.dP)(s),o.pb),(0,o.Yn)(n,s),(0,o.Lr)(n,s),(0,o.Tn)(n,s),(0,o.hM)(n,s),(0,o.VP)(n,s),(0,a.or)(n,s),(0,a.gA)(n,s)})(n),function(n){n.listen(`/${o.zh}/oc/project`,(n=>r(this,void 0,void 0,(function*(){const t=yield(0,o.d1)(n,void 0,"oc"),e=n.argvNoOptions[n.argvNoOptions.indexOf("project")+1];return e&&(0,o.xf)("SetNamespaceOrContext",e),t})))),n.listen(`/${o.zh}/oc/projects`,(n=>n.REPL.qexec("oc get projects",void 0,void 0,n.execOptions)),o.pb),["project","projects","ns","namespace","namespaces"].forEach((t=>{n.listen(`/${o.zh}/oc/get/${t}`,(0,o.gc)("oc"),o.pb)}))}(n),(n=>{i(void 0,void 0,void 0,(function*(){n.listen(`/${o.zh}/_oc`,o.g8,Object.assign({},o.pb,{requiresLocal:!0}))}))})(n),function(n){n.listen(`/${o.zh}/oc/login`,(n=>c(this,void 0,void 0,(function*(){const t=yield(0,o.fF)(n);return(0,o.xf)("SetNamespaceOrContext"),t}))))}(n),(n=>{(0,u.inBrowser)()&&!(0,u.hasProxy)()||n.catchall((n=>l(n[0])||n[0]===o.zh&&l(n[1])),(n=>f(void 0,void 0,void 0,(function*(){const t=n.argv[0]===o.zh?n.argv[1]:n.argv[0];if(1===n.argv.length||2===n.argv.length&&n.argv[1]===t){const e=yield(0,o.uV)(n,t);return e.links.push({label:d("More Information"),command:`${t} -h`}),e}return(0,o.lN)(n)?(0,o.t$)(t,n).catch((t=>(console.error(t),(0,o.fF)(n)))):(0,o.fF)(n)}))),1)})(n)}}}]);