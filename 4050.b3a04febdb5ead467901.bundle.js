(self.webpackChunkkui_shell=self.webpackChunkkui_shell||[]).push([[4050],{54050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{plugin:()=>m});var i=s(11227),n=s.n(i),o=s(51173),l=function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function l(e){try{h(i.next(e))}catch(e){o(e)}}function c(e){try{h(i.throw(e))}catch(e){o(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(l,c)}h((i=i.apply(e,t||[])).next())}))};const c=(0,o.i18n)("plugin-core-support"),h=n()("plugins/core-support/theme"),d={theme:{command:"theme",strict:"theme",docs:c("theme.usageDocs")},themes:{command:"themes",strict:"themes",docs:c("theme.usageDocs")},list:{command:"list",strict:"list",docs:c("theme.usageDocs")},reset:{command:"reset",strict:"reset",docs:c("theme.resetUsageDocs")},set:{command:"set",strict:"set",docs:"Set the current theme",required:[{name:"string",docs:c("theme.setUsageRequiredDocs")}]}},r=({REPL:e})=>l(void 0,void 0,void 0,(function*(){const t={cells:[c("Theme"),{value:c("Style"),hints:"hide-with-narrow-window"},{value:c("Provider"),hints:"hide"}]},s=()=>l(void 0,void 0,void 0,(function*(){const e=(yield(0,o.getPersistedThemeChoice)())||(yield(0,o.getDefaultTheme)());return(0,o.findThemeByName)(e)?e:(0,o.getDefaultTheme)()}));h("currentTheme",yield s());const i=(0,o.flatten)((yield(0,o.uiThemes)()).map((({plugin:t,themes:s})=>s.map((s=>({nameIdx:0,cells:[{value:s.name},{value:c(s.style),hints:"hide-with-narrow-window"},{value:t,hints:["hide"]}],onSelectExec:"qexec",onSelect:`theme set ${e.encodeComponent(s.name)}`})))))).sort(((e,t)=>"plugin-core-themes"===e.cells[2].value?1:"plugin-core-themes"===t.cells[2].value?-1:0)),n=yield l(void 0,void 0,void 0,(function*(){const e=yield s();return i.findIndex((t=>t.cells[0].value===e))}));return{apiVersion:"kui-shell/v1",kind:"RadioTable",title:c("theme.Available Themes"),header:t,body:i,defaultSelectedIdx:n}})),u=({argvNoOptions:e})=>l(void 0,void 0,void 0,(function*(){const t=e[e.indexOf("set")+1];return h("set",t),yield(0,o.switchToTheme)(t),!0})),m=e=>{h("plugin"),e.listen("/theme/list",r,{usage:d.list}),e.listen("/themes",r,{usage:d.themes}),e.listen("/theme",r,{usage:d.theme}),e.listen("/theme/set",u,{usage:d.set}),e.listen("/theme/current",(()=>l(void 0,void 0,void 0,(function*(){return(yield(0,o.getPersistedThemeChoice)())||c("theme.currentTheme")}))),{hidden:!0}),e.listen("/theme/reset",o.resetToDefaultTheme,{usage:d.reset})}}}]);