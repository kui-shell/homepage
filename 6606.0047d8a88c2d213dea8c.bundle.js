(self.webpackChunkkui_shell=self.webpackChunkkui_shell||[]).push([[6606,8817],{88817:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});var i=s(67294),o=s(51173),n=s(76810),r=s(47690),u=s(56497);class a extends i.PureComponent{constructor(t){super(t),this._blockRef=i.createRef(),o.eventBus.onCommandComplete(this.props.uuid,this.onOutputRender.bind(this)),this.state={idx:0,model:(0,u.ZS)()}}onOutputRender(){this.setState((t=>({idx:t.idx+1,model:(0,u.ZS)()})))}doFocus(){this._blockRef.current&&this._blockRef.current.doFocus()}render(){return i.createElement(n.Z.Provider,{value:{prompt:this.props.prompt||"❯"}},i.createElement("div",{className:"kui--input-stripe repl"},i.createElement(r.Z,{ref:this._blockRef,idx:this.state.idx,uuid:this.props.uuid,tab:this.props.tab,model:this.state.model,noOutput:!0,noPromptContext:!0,isFocused:!0,promptPlaceholder:this.props.promptPlaceholder},this.props.children)))}}},26606:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>d});var i=s(67294),o=s(51173),n=s(88817),r=s(24107),u=s(7716),a=function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function r(t){try{a(i.next(t))}catch(t){n(t)}}function u(t){try{a(i.throw(t))}catch(t){n(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))};class d extends i.PureComponent{constructor(t){super(t),this._inputStripeRef=i.createRef();const e=new r.he;o.eventBus.onceWithTabId("/tab/close/request",e.uuid,((t,e)=>a(this,void 0,void 0,(function*(){e.REPL.qexec("window close",void 0,void 0,{tab:e})})))),o.eventBus.onCommandComplete(e.uuid,(({command:t,response:e})=>a(this,void 0,void 0,(function*(){u.env.KUI_TEE_TO_FILE&&(yield(0,o.teeToFile)(e)),this.setState({promptPlaceholder:t}),this.doFocusInput()})))),this.state={tab:void 0,model:e,promptPlaceholder:""}}onTabReady(t){this.setState({tab:t}),t.REPL.pexec(this.props.commandLine.join(" "),{tab:t}),this.doFocusInput()}doFocusInput(){this._inputStripeRef.current&&setTimeout((()=>this._inputStripeRef.current.doFocus()))}render(){return i.createElement("div",{className:"kui--full-height"},i.createElement(r.I5,{noActiveInput:!0,uuid:this.state.model.uuid,active:!0,state:this.state.model.state,onTabReady:this.onTabReady.bind(this)}),i.createElement(r.VK,null,i.createElement(r.Hy,{className:"kui--input-stripe-in-status-stripe"},this.state.tab&&i.createElement(n.default,{ref:this._inputStripeRef,promptPlaceholder:this.state.promptPlaceholder,uuid:this.state.model.uuid,tab:this.state.tab})),this.props.children))}}}}]);