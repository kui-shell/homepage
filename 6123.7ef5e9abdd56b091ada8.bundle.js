(self.webpackChunkkui_shell=self.webpackChunkkui_shell||[]).push([[6123],{98046:(e,n,t)=>{e.exports=t(76250)},31170:e=>{e.exports=function(e,n,t){var o=[],i={};n||(n={});var s=n.week||{dow:0,doy:6};function a(e){o.push("("+e+")")}function r(n){e=e.slice(n)}function c(n){e=n+e}for(;e.length;){switch(e.charAt(0)){case"M":if(i.month=!0,/^MMMM/.test(e)){a('["January","February","March","April","May","June","July","August","September","October","November","December"][_month]'),r(4);continue}if(/^MMM/.test(e)){a('["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][_month]'),r(3);continue}if(/^MM/.test(e)){a('_month+1 < 10 ? "0" : ""'),a("_month+1"),r(2);continue}if(/^Mo/.test(e)){a("_month+1"),a('_month < 3 ? ["st","nd","rd"][_month] : "th"'),r(2);continue}a("_month + 1"),r(1);continue;case"Q":if(i.month=!0,/^Qo/.test(e)){a("Math.ceil((_month + 1) / 3)"),a('["st","nd","rd","th"][Math.floor(_month / 3)]'),r(2);continue}a("Math.ceil((_month + 1) / 3)"),r(1);continue;case"D":if(/^DDD/.test(e)){if(i.dayOfYear=!0,/^DDDD/.test(e)){a('_doy < 100 ? "0" : ""'),a('_doy < 10 ? "0" : ""'),a("_doy"),r(4);continue}if(/^DDDo/.test(e)){a("_doy"),a('(_doy%100) === 11 || (_doy%100) === 12 || (_doy%100) === 13 || ((_doy-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_doy-1)%10]'),r(4);continue}a("_doy"),r(3);continue}if(i.date=!0,/^DD/.test(e)){a('_date < 10 ? "0" : ""'),a("_date"),r(2);continue}if(/^Do/.test(e)){a("_date"),a('_date === 11 || _date === 12 || _date === 13 || ((_date-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_date-1)%10]'),r(2);continue}a("_date"),r(1);continue;case"d":if(i.day=!0,/^dddd/.test(e)){a('["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][_day]'),r(4);continue}if(/^ddd/.test(e)){a('["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][_day]'),r(3);continue}if(/^dd/.test(e)){a('["Su","Mo","Tu","We","Th","Fr","Sa"][_day]'),r(2);continue}if(/^do/.test(e)){a("_day"),a('_day === 1 ? "st" : _day === 2 ? "nd" : _day === 3 ? "rd" : "th"'),r(2);continue}a("_day"),r(1);continue;case"e":i.day=!0,a("(_day + 7 - "+ +s.dow+") % 7"),r(1);continue;case"E":i.day=!0,a("_day === 0 ? 7 : _day"),r(1);continue;case"w":if(i.week=!0,/^ww/.test(e)){a('_week < 10 ? "0" : ""'),a("_week"),r(2);continue}if(/^wo/.test(e)){a("_week"),a('_week === 11 || _week === 12 || _week === 13 || ((_week-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_week-1)%10]'),r(2);continue}a("_week"),r(1);continue;case"W":if(i.isoweek=!0,/^WW/.test(e)){a('_i_week < 10 ? "0" : ""'),a("_i_week"),r(2);continue}if(/^Wo/.test(e)){a("_i_week"),a('_i_week === 11 || _i_week === 12 || _i_week === 13 || ((_i_week-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_i_week-1)%10]'),r(2);continue}a("_i_week"),r(1);continue;case"Y":if(i.year=!0,/^YYYY/.test(e)){a("_year"),r(4);continue}if(/^YY/.test(e)){a('(_year % 100) < 10 ? "0" : ""'),a("_year % 100"),r(2);continue}a('_year < 9999 ? _year : "+" + _year'),r(1);continue;case"g":if(i.week=!0,/^gggg/.test(e)){a("_weekYear"),r(4);continue}if(/^gg/.test(e)){a('(_weekYear % 100) < 10 ? "0" : ""'),a("_weekYear % 100"),r(2);continue}break;case"G":if(i.isoweek=!0,/^GGGG/.test(e)){a("_i_weekYear"),r(4);continue}if(/^GG/.test(e)){a('(_i_weekYear % 100) < 10 ? "0" : ""'),a("_i_weekYear % 100"),r(2);continue}break;case"A":i.hour=!0,a('_hour > 11 ? "PM" : "AM"'),r(1);continue;case"a":i.hour=!0,a('_hour > 11 ? "pm" : "am"'),r(1);continue;case"H":if(i.hour=!0,/^HH/.test(e)){a('_hour < 10 ? "0" : ""'),a("_hour"),r(2);continue}a("_hour"),r(1);continue;case"h":if(i.hour=!0,/^hh/.test(e)){a('((_hour+11) % 12) < 9 ? "0" : ""'),a("((_hour+11) % 12) + 1"),r(2);continue}a("((_hour+11) % 12) + 1"),r(1);continue;case"k":if(i.hour=!0,/^kk/.test(e)){a('_hour > 0 && _hour < 10 ? "0" : ""'),a('_hour === 0 ? "24" : _hour'),r(2);continue}a('_hour === 0 ? "24" : _hour'),r(1);continue;case"m":if(i.minutes=!0,/^mm/.test(e)){a('_mins < 10 ? "0" : ""'),a("_mins"),r(2);continue}a("_mins"),r(1);continue;case"s":if(i.seconds=!0,/^ss/.test(e)){a('_secs < 10 ? "0" : ""'),a("_secs"),r(2);continue}a("_secs"),r(1);continue;case"S":if(i.millis=!0,/^SSS/.test(e)){a('_ms < 100 ? "0" : ""'),a('_ms < 10 ? "0" : ""'),a("_ms");var d=/^S{3,9}/.exec(e)[0].length;d>3&&a('"'+Array(d-2).join(0)+'"'),r(d);continue}if(/^SS/.test(e)){a('_ms < 100 ? "0" : ""'),a("Math.floor(_ms/10)"),r(2);continue}a("Math.floor(_ms / 100)"),r(1);continue;case"Z":if(i.offset=!0,/^ZZ/.test(e)){a('_offs >= 0 ? "+" : "-"'),a('_offH < 10 ? "0" : ""'),a("_offH"),a('_offM < 10 ? "0" : ""'),a("_offM"),r(2);continue}a('_offs >= 0 ? "+" : "-"'),a('_offH < 10 ? "0" : ""'),a("_offH"),a('":"'),a('_offM < 10 ? "0" : ""'),a("_offM"),r(1);continue;case"X":a("Math.floor(d / 1000)"),r(1);continue;case"x":a("d.valueOf()"),r(1);continue;case"L":if(/^LLLL/.test(e)){r(4),c("dddd, MMMM D, YYYY LT");continue}if(/^LLL/.test(e)){r(3),c("MMMM D, YYYY LT");continue}if(/^LL/.test(e)){r(2),c("MMMM D, YYYY");continue}if(/^LTS/.test(e)){r(3),c("h:mm:ss A");continue}if(/^LT/.test(e)){r(2),c("h:mm A");continue}r(1),c("MM/DD/YYYY");continue;case"l":if(/^llll/.test(e)){r(4),c("ddd, MMM D, YYYY LT");continue}if(/^lll/.test(e)){r(3),c("MMM D, YYYY LT");continue}if(/^ll/.test(e)){r(2),c("MMM D, YYYY");continue}if(/^lts/.test(e)){r(3),c("h:mm:ss A");continue}if(/^lt/.test(e)){r(2),c("h:mm A");continue}r(1),c("M/D/YYYY");continue;case"[":var u=e.indexOf("]");if(-1===u){a('"["'),r(1);continue}a(JSON.stringify(e.slice(1,u))),r(u+1);continue}a(JSON.stringify(e.charAt(0))),r(1)}var l="";return i.date&&(l+="var _date = d.get"+(t?"UTC":"")+"Date();\n"),i.month&&(l+="var _month = d.get"+(t?"UTC":"")+"Month();\n"),i.dayOfYear&&(l+="var _startOfYear = new Date(d.valueOf());\n_startOfYear.set"+(t?"UTC":"")+"Month(0);\n_startOfYear.set"+(t?"UTC":"")+"Date(1);\nvar _doy = Math.round((d - _startOfYear) / 864e5) + 1;\n"),i.day&&(l+="var _day = d.get"+(t?"UTC":"")+"Day();\n"),i.year&&(l+="var _year = d.get"+(t?"UTC":"")+"FullYear();\n"),i.hour&&(l+="var _hour = d.get"+(t?"UTC":"")+"Hours();\n"),i.minutes&&(l+="var _mins = d.get"+(t?"UTC":"")+"Minutes();\n"),i.seconds&&(l+="var _secs = d.get"+(t?"UTC":"")+"Seconds();\n"),i.millis&&(l+="var _ms = d.get"+(t?"UTC":"")+"Milliseconds();\n"),i.offset&&(l+=t?"var _offs = 0, _absOffs = 0, _offH = 0, _offM = 0;":"var _offs = -d.getTimezoneOffset();\nvar _absOffs = _offs < 0 ? -_offs : _offs;\nvar _offH = Math.floor(_absOffs / 60);\nvar _offM = _absOffs % 60;\n"),i.week&&(l+="var _wend = "+(s.doy-s.dow)+";\nvar _ddw = "+ +s.doy+" - d.get"+(t?"UTC":"")+"Day();\nif(_ddw > _wend) _ddw -= 7;\nif(_ddw < _wend - 7) _ddw += 7;\nvar _d2 = new Date(d.valueOf());\n_d2.set"+(t?"UTC":"")+"Date(d.get"+(t?"UTC":"")+"Date() + _ddw);\nvar _soy2 = new Date(_d2.valueOf());\n_soy2.set"+(t?"UTC":"")+"Month(0);\n_soy2.set"+(t?"UTC":"")+"Date(1);\nvar _doy2 = Math.round((_d2 - _soy2) / 864e5) + 1;\nvar _week = Math.ceil(_doy2 / 7);\nvar _weekYear = _d2.get"+(t?"UTC":"")+"FullYear();\n"),i.isoweek&&(l+="var _i_wend = 3;\nvar _i_ddw = 4 - d.get"+(t?"UTC":"")+"Day();\nif(_i_ddw > _i_wend) _i_ddw -= 7;\nif(_i_ddw < _i_wend - 7) _i_ddw += 7;\nvar _i_d2 = new Date(d.valueOf());\n_i_d2.set"+(t?"UTC":"")+"Date(d.get"+(t?"UTC":"")+"Date() + _i_ddw);\nvar _i_soy2 = new Date(_i_d2.valueOf());\n_i_soy2.set"+(t?"UTC":"")+"Month(0);\n_i_soy2.set"+(t?"UTC":"")+"Date(1);\nvar _i_doy2 = Math.round((_i_d2 - _i_soy2) / 864e5) + 1;\nvar _i_week = Math.ceil(_i_doy2 / 7);\nvar _i_weekYear = _i_d2.get"+(t?"UTC":"")+"FullYear();\n"),l+='return (\n"" +\n'+o.join(" +\n")+"\n);",new Function("d",l)}},76250:(e,n,t)=>{var o=t(31170);function i(e){return e?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"}function s(e){function n(n,t){n||(n=i(e));var s=o(n,null,e);return void 0===t?s:s(t)}var t={};return n.cached=function(n,s){n||(n=i(e));var a=t[n];return void 0===a&&(a=t[n]=o(n,null,e)),void 0===s?a:a(s)},n}e.exports=s(!1),e.exports.UTC=s(!0)},49718:(e,n,t)=>{"use strict";t.r(n),t.d(n,{mkTemp:()=>i,default:()=>a});var o=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};function i(){return o(this,void 0,void 0,(function*(){const{file:e}=yield Promise.all([t.e(2830),t.e(5835),t.e(3563),t.e(6276),t.e(9026)]).then(t.t.bind(t,36276,19));return new Promise(((n,t)=>{e({prefix:"kui-"},((e,o)=>{e?t(e):n({mode:"raw",content:o})}))}))}))}function s(e){return o(this,void 0,void 0,(function*(){const{unlink:n}=yield Promise.resolve().then(t.t.bind(t,12993,23));return new Promise(((t,o)=>{n(e.argvNoOptions[1],(e=>{e?o(e):t(!0)}))}))}))}const a=e=>{e.listen("/mkTemp",i,{hidden:!0,requiresLocal:!0}),e.listen("/rmTemp",s,{hidden:!0,requiresLocal:!0})}},86123:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>ue});var o=t(51173);const i=[{name:"path",docs:(0,o.i18n)("plugin-bash-like")("localFilePath"),file:!0,positional:!0}];var s=t(62062),a=t(7716),r=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};const c=(0,o.i18n)("plugin-bash-like"),d={cd:{strict:"cd",command:"cd",title:c("cdUsageTitle"),header:c("cdUsageHeader"),optional:i}},u=e=>r(void 0,void 0,void 0,(function*(){const n=e.REPL.split(e.command,!0,!0)[1]||"";if("-"===n&&!a.env.OLDPWD)throw new Error(`cd: not a directory: ${n}`);const t=n?"-"===n?a.env.OLDPWD:n:(0,o.expandHomeDir)("~"),i=(0,s.Xy)(t,void 0,!0);try{const{isDirectory:r,fullpath:c}=i?yield i.fstat(e,(0,s.AG)(t)):{isDirectory:!0,fullpath:(0,s.AG)(t)},d=i&&i.isLocal;if(r){void 0===a.env.OLDPWD&&(a.env.OLDPWD="");const n=(0,o.cwd)(),t=(0,o.expandHomeDir)(c);return d&&!(0,o.inBrowser)()&&a.chdir(t),a.env.OLDPWD=n,a.env.PWD=t,d?delete a.env.VIRTUAL_CWD:a.env.VIRTUAL_CWD=t,e.tab.state&&e.tab.state.capture(),t}throw new Error(`cd: not a directory: ${n}`)}catch(e){throw e.message&&e.message.includes("no such file or directory")?new Error(`cd: no such file or directory: ${n}`):e}})),l=({command:e,execOptions:n,REPL:t})=>r(void 0,void 0,void 0,(function*(){const o=yield t.qexec(e.replace(/^cd/,"kuicd"),void 0,void 0,n);return a.env.PWD=o,o}));var f=t(98046),h=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};const _=(0,f.UTC)("MMM DD HH:mm"),m=(0,o.i18n)("plugin-bash-like");function v(e){return e<1024?`${e}B`:e<1048576?`${(e/1024).toFixed(1)}K`:e<1073741824?`${(e/1024/1024).toFixed(1)}M`:e<1099511627776?`${(e/1024/1024/1024).toFixed(1)}G`:`${(e/1024/1024/1024/1024).toFixed(1)}T`}function p(e){const{isDirectory:n,isSymbolicLink:t,isExecutable:o,isSpecial:i}=e.dirent;return n?"dir-listing-is-directory":t?"dir-listing-is-link":o?"dir-listing-is-executable":i?"dir-listing-is-other-special":""}const w="hide-with-sidecar",y="slightly-deemphasize",g="hide-with-narrow-window",D="elide-with-narrow-window";function k({dirent:e}){return e.permissions}function M(e){return e.dirent.username||e.stats.uid.toString()}function b(e){return e.stats.gid.toString()}function O(e,n,t,o,i,s,a){const r=n.parsedOptions.l,c=r&&t?[{value:k(e),outerCSS:w}]:[],d=r&&i?[{value:M(e),outerCSS:w,css:y}]:[],u=r&&s?[{value:b(e),outerCSS:w,css:y}]:[],l=r&&o?[{value:v(e.stats.size).replace(/\s/g,""),outerCSS:"",css:"yellow-text"}]:[],f=r&&a?[{value:(h=e.stats.mtimeMs,_(new Date(h)).replace(/(\s)0/g,"$1 ")),outerCSS:g,css:`${D} ${y} pre-wrap sub-text`}]:[];var h;return c.concat(d).concat(u).concat(l).concat(f)}function x(e,n){const t=n.parsedOptions.r?-1:1,i=n.parsedOptions.S?(e=>(n,t)=>e*(t.stats.size-n.stats.size))(t):n.parsedOptions.t?(e=>(n,t)=>e*(t.stats.mtimeMs-n.stats.mtimeMs))(t):(e=>(n,t)=>e*n.nameForDisplay.localeCompare(t.nameForDisplay))(t),s=e.some((e=>e.dirent&&e.dirent.permissions)),a=e.some((e=>e.stats&&e.stats.size)),r=e.some((e=>e.dirent&&e.dirent.username||e.stats&&e.stats.uid>=0)),c=e.some((e=>e.stats&&e.stats.gid>=0)),d=e.some((e=>e.stats&&e.stats.mtimeMs)),u=e.sort(i).map((e=>{return{name:(t=e,`${t.nameForDisplay}${t.dirent.isDirectory?t.nameForDisplay.endsWith("/")?"":"/":t.dirent.isSymbolicLink?"@":t.dirent.isExecutable?"*":""}`),css:p(e),onclickExec:"pexec",onclick:`${e.dirent.isDirectory?n.parsedOptions.l?"ls -l":"ls":"open"} ${(0,o.encodeComponent)(e.path)}`,attributes:O(e,n,s,a,r,c,d)};var t})),l=n.parsedOptions.l,f=l&&c?[{value:"Group",outerCSS:w}]:[],h=l&&a?[{value:"Size",outerCSS:""}]:[],_=l&&d?[{value:"Last Modified",outerCSS:g,css:D}]:[],m=l?"table":"grid";return{header:{name:"Name",attributes:(l&&s?[{value:"Permissions",outerCSS:w}]:[]).concat(l&&r?[{value:"User",outerCSS:w}]:[]).concat(f).concat(h).concat(_)},body:u,markdown:!0,noSort:!0,defaultPresentation:m,allowedPresentations:[m],drilldownTo:"this-split",style:l?void 0:o.TableStyle.Light}}const Y=e=>n=>h(void 0,void 0,void 0,(function*(){const t=n.command.match(/\|\s*grep\s+([^|]+)$/),i=/\|\s*wc\s+[^|]*$/.test(n.command),s=n.command.match(/\|\s*grep\s+([\w*.]+)\s*\|\s*wc\s+[^|]*$/),a=!!s||!!i||!!t;let r=n.command;if(a)r=r.slice(0,r.indexOf("|"));else if(/\|/.test(n.command))return n.REPL.qexec(`sendtopty ${n.command}`,n.block);const c=r.replace(/^\s*ls/,"").replace(/\s--?\S+/g,""),d="vfs ls "+(n.parsedOptions.l||"lls"===e?"-l ":"")+function(e,n){return n.parsedOptions[e]?` -${e} `:""}("d",n)+c;"lls"===e&&(n.parsedOptions.l=!0);const u=(yield n.REPL.rexec(d)).content;if(0===u.length){const e=u.map((e=>e.dirent.isDirectory));if(e.some((e=>!e))){const n=new Error(c.split(/\s/).map(((n,t)=>e[t]?void 0:`ls: ${n}: No such file or directory`)).filter((e=>e)).join("\n"));throw n.code=404,n}}if(t||s){const e=s?s[1]:t[1],i=(0,o.split)(e).filter((e=>!/^-/.test(e)))[0].replace(/\./g,"\\.").replace(/\*/g,".*"),a=new RegExp(/\*/.test(i)?`^${i}$`:i),r=u.filter((e=>a.test(e.name)));return t?x(r,n):r.length}return i?u.length:x(u,n)})),T=e=>({command:e,title:m("lsUsageTitle"),header:m("lsUsageHeader"),noHelpAlias:!0,optional:i.concat([{name:"-A",boolean:!0,docs:m("lsDashAUsageDocs")},{name:"-a",boolean:!0,docs:m("lsDashaUsageDocs")},{name:"-d",boolean:!0,docs:m("lsDashdUsageDocs")},{name:"-c",boolean:!0,docs:m("lsDashcUsageDocs")},{name:"-C",boolean:!0,hidden:!0},{name:"-l",boolean:!0,hidden:!0},{name:"-h",boolean:!0,hidden:!0},{name:"-t",boolean:!0,docs:m("lsDashtUsageDocs")},{name:"-r",boolean:!0,docs:m("lsDashrUsageDocs")},{name:"-s",boolean:!0,hidden:!0},{name:"-S",boolean:!0,docs:m("lsDashSUsageDocs")}])}),S=e=>{const n=e.listen("/ls",Y("ls"),{usage:T("ls"),flags:{boolean:T("ls").optional.filter((e=>e.boolean)).map((e=>e.name.replace(/^-(-)?/,"")))}});e.synonym("/lls",Y("lls"),n,{usage:T("lls")})},L=e=>{e.listen("/edit",(({command:e,REPL:n})=>n.qexec(e.replace(/\s*edit/,"open").replace(/--create/,""))))};var C=t(11227),P=t.n(C),U=t(26470),$=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};const H=(0,o.i18n)("plugin-bash-like"),N=P()("plugins/bash-like/cmds/open");function E(e){switch(e){case"sh":return"shell";case"md":return"text/markdown";case"html":return"text/html";case"yaml":case"json":return e;default:return"text/plain"}}function F(e){return $(this,void 0,void 0,(function*(){const{argvNoOptions:n,REPL:t}=e,i=n[n.indexOf("open")+1];N("open",i);const s=(0,o.findFile)((0,o.expandHomeDir)(i)),a=i.substring(i.lastIndexOf(".")+1);if("png"===a||"jpg"===a||"jpeg"===a||"tiff"===a||"tif"===a||"gif"===a||"icns"===a||"ico"===a||"webp"===a||"bpg"===a||"svg"===a||"mov"===a||"mp4"===a||"ogg"===a||"mp3"===a)return window.open(s,"target=_blank"),!0;if("pkl"===a||"sab"===a)throw new Error("Opening of binary files not supported");{const e=(yield t.rexec(`vfs fstat ${t.encodeComponent(i)} --with-data --enoent-ok`)).content;if(e.isDirectory)return N("trying to open a directory; delegating to ls"),t.qexec(`ls ${t.encodeComponent(i)}`);{if(e.viewer&&"open"!==e.viewer){const n=`${e.viewer} ${t.encodeComponent(i)}`;return N("delegating to fstat-provided viewer",n),t.qexec(n)}const n=(0,U.dirname)(i),o=e.data;return{apiVersion:"kui-shell/v1",kind:"File",metadata:{name:(0,U.basename)(i),namespace:"."===n?void 0:n},modes:["string"==typeof o?{mode:"view",label:H("Edit"),contentType:E(a),content:o}:{mode:"view",label:H("View"),content:o}],spec:{filepath:i,fullpath:s}}}}}))}const A={strict:"open",command:"open",title:H("openUsageTitle"),header:H("openUsageHeader"),optional:i},q=e=>{e.listen("/open",F,{usage:A})};var W=t(18377),R=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};const G=(0,o.i18n)("plugin-bash-like"),z=P()("plugins/bash-like/cmds/head");function J(e){return R(this,void 0,void 0,(function*(){const{argvNoOptions:n,parsedOptions:t}=e,i=n[n.indexOf("head")+1];if(z("head",i),"number"==typeof i&&i<0){const n="-n "+-1*i;return e.REPL.qexec(e.command.replace(i,n))}try{return function(e,n){const t=e.substring(e.lastIndexOf(".")+1),i=(0,U.dirname)(e),s="."===i?void 0:i,a={mode:"view",label:G("View"),contentType:E(t),content:n};return{apiVersion:"kui-shell/v1",kind:"File",metadata:{name:(0,U.basename)(e),namespace:s},modes:[a],spec:{filepath:e,fullpath:(0,o.findFile)((0,o.expandHomeDir)(e))}}}(i,yield(0,W.ot)(i,0,t.c||t.n||10,t.c?"bytes":"lines"))}catch(e){throw new Error(`head: ${e.message}`)}}))}const V=e=>{e.listen("/head",J,{requiresLocal:!0})};var Z=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};function j(e,n){return Z(this,void 0,void 0,(function*(){const{writeFile:o}=yield Promise.resolve().then(t.t.bind(t,12993,23));return new Promise(((t,i)=>{o(e,n,(e=>{if(e)if("ENOENT"===e.code){const n=new Error(e.message);n.stack=e.stack,n.code=404,i(n)}else i(e);else t(!0)}))}))}))}const I=({argvNoOptions:e,execOptions:n})=>Z(void 0,void 0,void 0,(function*(){return j(e[1],n.data)}));function B(e){return Z(this,void 0,void 0,(function*(){const{mkTemp:n}=yield Promise.resolve().then(t.bind(t,49718)),o=e.execOptions.data,{content:i}=yield n();return yield j(i,o),{mode:"raw",content:i}}))}const X=e=>{e.listen("/fwrite",I,{hidden:!0,requiresLocal:!0}),e.listen("/fwriteTemp",B,{hidden:!0,requiresLocal:!0})};var K=t(49718),Q=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};function ee(e){return Q(this,void 0,void 0,(function*(){return{mode:"raw",content:yield(0,W.ls)(e,e.argvNoOptions.slice(2))}}))}function ne(e){return Q(this,void 0,void 0,(function*(){return{mode:"raw",content:yield(0,W.UK)(e,e.argvNoOptions[2],!!e.parsedOptions["with-data"],!!e.parsedOptions["enoent-ok"])}}))}function te(e){e.listen("/vfs/_ls",ee,{requiresLocal:!0,flags:{boolean:["A","a","d","c","C","l","h","t","r","s","S"]}}),e.listen("/vfs/_fstat",ne,{requiresLocal:!0,flags:{boolean:["with-data","enoent-ok"]}})}var oe=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};function ie(e,n,t,o){this.listen(`/${e}`,n,{flags:{boolean:("string"==typeof t?t.split(""):t).concat(o||[])}})}function se(e){const n=ie.bind(e);n("vfs/ls",(e=>oe(this,void 0,void 0,(function*(){try{return yield ee(e)}catch(n){return e.REPL.qexec(e.command.replace("vfs ls","vfs _ls"))}}))),"AadcClhtrsS"),n("vfs/fstat",(e=>oe(this,void 0,void 0,(function*(){try{return yield ne(e)}catch(n){return e.REPL.qexec(e.command.replace("vfs fstat","vfs _fstat"))}}))),["with-data","enoent-ok"]),n("rm",(e=>(0,W.rm)(e,e.argvNoOptions[1],!(!e.parsedOptions.r&&!e.parsedOptions.R)).then((()=>!0))),"frRidPvw"),n("mkdir",(e=>(0,W.i$)(e,e.argvNoOptions[1]).then((()=>!0))),"pv"),n("rmdir",(e=>(0,W.ZD)(e,e.argvNoOptions[1]).then((()=>!0))),"p"),n("gzip",(e=>(0,W.iv)(e,e.argvNoOptions.slice(1)).then((e=>e||!0))),"cdfhkLlNnqrtVv"),n("gunzip",(e=>(0,W.sw)(e,e.argvNoOptions.slice(1)).then((e=>e||!0))),"cfhkLNqrtVv",["fast","best","stdout","to-stdout","decompress","uncompress","force","help","keep","license","list","name","quiet","recursive","suffix","test","version","verbose"]),n("cp",(e=>{const n=e.argvNoOptions.length,t=e.argvNoOptions.slice(1,n-1),o=e.argvNoOptions[n-1];return(0,W.cp)(e,t,o)}),"acfHiLnPpRvXs"),n("grep",(e=>(0,W.h3)(e,e.argvNoOptions[1],e.argvNoOptions.slice(2))),"alcEFHIJLnOqrsUVvwxyZz")}var ae=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};function re(e){return ae(this,void 0,void 0,(function*(){yield Promise.all([se(e),te(e)])}))}var ce=t(47510),de=function(e,n,t,o){return new(t||(t=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((o=o.apply(e,n||[])).next())}))};const ue=e=>de(void 0,void 0,void 0,(function*(){var n;yield Promise.all([(n=e,n.listen("/kuicd",u,{requiresLocal:!0}),void((0,o.inBrowser)()?n.listen("/cd",l,{usage:d.cd}):n.listen("/cd",u,{usage:d.cd}))),S(e),L(e),V(e),q(e),X(e),(0,K.default)(e),re(e),(0,ce.plugin)(e)])}))}}]);