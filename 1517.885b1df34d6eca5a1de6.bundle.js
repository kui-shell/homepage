(self.webpackChunkkui_shell=self.webpackChunkkui_shell||[]).push([[1517],{67329:e=>{function n(e){return Promise.resolve().then((()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=()=>[],n.resolve=n,n.id=67329,e.exports=n},80534:(e,n,o)=>{var t={"./plugin-bash-like/fs/mdist/plugin":[86123,7510,6123],"./plugin-bash-like/mdist/plugin":[29470,8575,9267,5301,9470],"./plugin-client-common/mdist/plugin":[49011,9011],"./plugin-core-support/about/mdist/plugin":[82308,2308],"./plugin-core-support/mdist/plugin":[32367,2367],"./plugin-electron-components/mdist/plugin":[2465,2465],"./plugin-git/mdist/plugin":[14291,8575,9267,5301,8170],"./plugin-iter8/mdist/plugin":[93384,3384],"./plugin-kubectl-flow-views/tekton/mdist/plugin":[91095,8575,9267,2830,5835,1342,2858,1095],"./plugin-kubectl/helm/mdist/plugin":[94642,8575,9267,2830,5835,1342,2858,4642],"./plugin-kubectl/krew/mdist/plugin":[30257,8575,9267,2830,5835,1342,2858,257],"./plugin-kubectl/logs/mdist/plugin":[25697,8575,9267,2830,5835,1342,2858,5697],"./plugin-kubectl/mdist/plugin":[43569,8575,9267,2830,5835,1342,2858,3569],"./plugin-kubectl/oc/mdist/plugin":[78029,8575,9267,2830,5835,1342,2858,8029],"./plugin-kubectl/odo/mdist/plugin":[5458,8575,9267,2830,5835,1342,2858,5458],"./plugin-kubectl/view-utilization/mdist/plugin":[51878,8575,9267,2830,5835,1342,2858,1878],"./plugin-wskflow/mdist/plugin":[13537,4002,3733]};function r(e){if(!o.o(t,e))return Promise.resolve().then((()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=t[e],r=n[0];return Promise.all(n.slice(1).map(o.e)).then((()=>o(r)))}r.keys=()=>Object.keys(t),r.id=80534,e.exports=r},8176:(e,n,o)=>{var t={"./plugin-bash-like/fs/mdist/preload":[58339,8339],"./plugin-bash-like/mdist/preload":[67466,7466],"./plugin-core-support/mdist/preload":[81907,6070],"./plugin-git/mdist/preload":[73259,3259],"./plugin-iter8/mdist/preload":[32959,7025,973,938],"./plugin-kubectl-flow-views/tekton/mdist/preload":[38805,8805],"./plugin-kubectl/helm/mdist/preload":[32535,2535],"./plugin-kubectl/mdist/preload":[63981,3981],"./plugin-proxy-support/mdist/preload":[29071,9071]};function r(e){if(!o.o(t,e))return Promise.resolve().then((()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=t[e],r=n[0];return Promise.all(n.slice(1).map(o.e)).then((()=>o(r)))}r.keys=()=>Object.keys(t),r.id=8176,e.exports=r},49132:(e,n,o)=>{"use strict";o.r(n),o.d(n,{setPluginResolver:()=>h,read:()=>$,ImplForPlugins:()=>C,proxy:()=>E});var t=o(11227),r=o.n(t),i=o(78545),s=o(42341),l=o(41881),u=o(25732),a=o(9034),c=o(32578),d=o(81933),p=function(e,n,o,t){return new(o||(o=Promise))((function(r,i){function s(e){try{u(t.next(e))}catch(e){i(e)}}function l(e){try{u(t.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?r(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,l)}u((t=t.apply(e,n||[])).next())}))};const g=r()("core/command-tree");let m;g("loading"),g("finished loading modules");const h=e=>{m=e},f=(e,n,o=!1,t=!1,r=0,i=!1)=>{let s,l=e;for(let e=r;e<n.length;e++){if(s=l.children&&l.children[n[e]],!s){if(o)break;l.children||(l.children={}),s=l.children[n[e]]={$:void 0,parent:l,key:n[e],options:{hide:t},route:`${"/"===l.route?"":l.route}/${n[e]}`}}l=s,s=s.children&&s.children[n[e]]}if(s||i||(s=l),!s.options||!s.options.noArgs||((e,n)=>{const o=e.split("/").slice(1);for(let e=0;e<o.length;e++)if(o[e]!==n[e])return!1;return o.length===n.length})(s.route,n))return s},v=(e,n)=>f((0,c.getModelInternal)().root,e,n);class y{}const b=(e,n,o)=>((e,n,o,t=new y)=>{m&&m.isOverridden(n)&&m.resolve(n,{tryCatchalls:!1});const r=n.split("/").splice(1),i=f((0,c.getModelInternal)().root,r,!1,t.hide);if(i){const e=i.options;return t&&(i.options=t),i.$&&(i.options||(i.options={}),e&&Object.assign(i.options,e),i.options.override=i.$),i.$=o,i.route=n,i}})((0,c.getModelInternal)().root,e,n,o),w=(e,n)=>{const o=n.listen||b,t=e.split("/").splice(1),r=v(t,!1);if(r){r.route=e,r.options=n||{},r.options.isDirectory=!0;const t=()=>{const e=n.usage||n.synonymFor&&n.synonymFor.options&&n.synonymFor.options.usage;throw new l.Oi({usage:e})},i={noArgs:!0,subtreeHandler:!0,noAuthOk:!0,requiresFullyQualifiedRoute:!0};return o(e,t,Object.assign({},n,i)),o(`${e}/help`,t,Object.assign({},n,i)),r}},k="Command not found",O=(e,n,o=!1,t=!1)=>{const r=n&&n.filter((e=>e.usage)),i=r&&r.length>0,s=i?((e,n)=>new l.Oi({message:n?"":k,usage:{header:"The following commands are partial matches for your request.",available:e.map((e=>e.usage))}},{noBreadcrumb:!0,noHide:!0}))(r,t):new Error(`Command not found: ${e}`);if(s.code=404,i?s.partialMatches=r.map((e=>({command:e.route.split("/").slice(1).join(" "),usage:e.usage}))):s.hide=t,o)return s;throw s},P=(e,n,o)=>{const t={};n&&(t.route=n.route,t.plugin=n.options.plugin||"builtin");return{subtree:n,route:n.route,eval:e,options:n&&n.options,success:({tab:e,type:o,command:r,isDrilldown:i=!1,parsedOptions:s})=>{if(t.tab=e,t.execType=o,t.command=r,t.isDrilldown=i,s&&n.options&&n.options.okOptions){const e=n.options.okOptions.filter((e=>s[e]));e&&(t.options=e)}},error:(e,r,l,a)=>{if(t.tab=r,t.execType=l,t.command=e,t.error=(0,u.oopsMessage)(a),n&&s.default&&(s.default.emit("/command/complete",t),t.execType!==i.s.Nested&&s.default.emit("/command/complete/fromuser",r)),127===a.code&&o){return O(e,o,!0,a.hide)}return a}}},x=(e,n,o,t,r)=>p(void 0,void 0,void 0,(function*(){let e=f((0,c.getModelInternal)().root,n,!0),i=e&&e.$;if(!i){const t=`/${n.join("/")}`;yield m.resolve(t,{tryCatchalls:r&&(!o||0===o.length)}),e=f((0,c.getModelInternal)().root,n,!0),i=e&&e.$}if(i)return P(i,e);if(o){if(0===o.length)return x((0,c.getModelInternal)().root,t,void 0,t,r);if(o.length>0&&o[o.length-1]!==t[t.length-1]){const e=x((0,c.getModelInternal)().root,o.concat(t),o.slice(0,o.length-1),t,r);if(e)return e;const n=(0,d.getCurrentContext)().concat(t).filter(((e,n,o)=>e!==o[n-1]));return x((0,c.getModelInternal)().root,n,o.slice(0,o.length-1),t,r)}return!1}return!1})),j=(e,n,o)=>("kui"===n[0]&&n.shift(),x((0,c.getModelInternal)().root,n,d.Context.current,n,o)),M=(e,n)=>{const o=[];function t(e){e.route.indexOf(n)>=0&&(!e.usage||!e.usage.synonymFor&&!e.usage.hide)&&o.push(e)}for(const n in e){t(e[n]);for(const o in e[n].children)t(e[n].children[o])}return o},$=(e,n,o=!1,t,r=!0)=>p(void 0,void 0,void 0,(function*(){let e;if(o||(yield m.resolve(`/${n.join("/")}`,{tryCatchalls:!1}),e=yield j(0,n,r)),e)return e;{let e;if(1===n.length)e=yield M((0,a.prescanModel)().usage,n[0]);else{const o=n.slice(0,n.length-1),t=n[n.length-1];(yield j(0,o,r))&&(e=yield M((0,a.prescanModel)().usage,t))}return e&&e.length>0||(e=void 0),((e,n,o,t=!0)=>{if(!o||!o.failWithUsage){const o=t&&(0,c.getModelInternal)().catchalls.filter((({offer:n})=>n(e))).sort((({prio:e},{prio:n})=>n-e))[0];if(o)return P(o.eval,o,n);s.default.emit("/command/resolved",{error:`Command not found: ${e.join(" ")}`,command:e[0]})}return O(e.join(" "),n)})(n,e,t,r)}}));class C{constructor(e){this.plugin=e}catchall(e,n,o=0,t=new y){return(0,c.getModelInternal)().catchalls.push({route:"*",offer:e,eval:n,prio:o,plugin:this.plugin,options:t,$:void 0,key:void 0,parent:void 0})}listen(e,n,o){return b(e,n,Object.assign({},o,{plugin:this.plugin}))}synonym(e,n,o,t){return((e,n,o,t=o.options)=>{if(e!==o.route){const r=b(e,n,Object.assign({},t,{synonymFor:o}));o.synonyms||(o.synonyms={}),o.synonyms[r.route]=r}})(e,n,o,t&&Object.assign({},t,{plugin:this.plugin}))}subtree(e,n){return w(e,n)}subtreeSynonym(e,n,o=n.options){return((e,n,o=n.options)=>{if(e!==n.route){const t=w(e,Object.assign({},o,{synonymFor:n}));n.synonyms||(n.synonyms={}),n.synonyms[t.route]=t}})(e,n,o)}override(e,n,o,t){return p(this,void 0,void 0,(function*(){const r=(yield this.find(e,n)).$;if(!r)throw new Error(`Cannot find desired command handler for ${e} from plugin ${n}`);return this.listen(e,(e=>o(e,r)),t)}))}find(e,n,o=!0){return p(this,void 0,void 0,(function*(){const t=v(e.split("/").slice(1),!0);return!t||t.route!==e||!o&&m&&m.isOverridden(t.route)?(m&&(n?yield m.resolveOne(n):yield m.resolve(e,{tryCatchalls:!1})),v(e.split("/").slice(1),!0)):t}))}}function E(e){return new C(e)}},25732:(e,n,o)=>{"use strict";o.r(n),o.d(n,{oopsMessage:()=>t});const t=e=>{try{return"string"==typeof e?e:function(e){const n=e;return!!(n.error&&n.error.response&&n.error.response.result&&n.error.response.result.error&&n.error.response.result.error.error)}(e)?e.error.response.result.error.error:function(e){const n=e;return!!(n.error&&n.error.response&&n.error.response.result&&n.error.response.result.error)}(e)?e.error.response.result.error:function(e){const n=e;return!(!n.error||!n.error.error)}(e)?e.error.error:function(e){const n=e;return!(!n.error||n.message)}(e)?e.error:e.message||"Internal Error"}catch(e){return console.error(e),"Internal Error"}}},9034:(e,n,o)=>{"use strict";o.r(n),o.d(n,{_useUpdatedUserPrescan:()=>C,init:()=>T,pluginRoot:()=>P,preload:()=>E,prescanModel:()=>$,registrar:()=>x,userInstalledHome:()=>I});var t=o(11227),r=o.n(t),i=o(31505),s=o(64974),l=o(49132),u=o(48851),a=o(55828),c=o(84665),d=function(e,n,o,t){return new(o||(o=Promise))((function(r,i){function s(e){try{u(t.next(e))}catch(e){i(e)}}function l(e){try{u(t.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?r(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,l)}u((t=t.apply(e,n||[])).next())}))};const p=r()("core/plugins/preloader");p("loading");class g extends l.ImplForPlugins{constructor(e){super(e)}registerMode(e){(0,a.KX)(e)}registerModes(...e){e.forEach((e=>this.registerMode(e)))}registerBadge(e){(0,u._i)(e)}registerBadges(...e){e.forEach((e=>this.registerBadge(e)))}registerSessionInitializer(e){(0,c.$)(e)}}var m=function(e,n,o,t){return new(o||(o=Promise))((function(r,i){function s(e){try{u(t.next(e))}catch(e){i(e)}}function l(e){try{u(t.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?r(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,l)}u((t=t.apply(e,n||[])).next())}))};const h=r()("core/plugins/resolver"),f=(e,n,t,r)=>m(void 0,void 0,void 0,(function*(){try{Object.prototype.hasOwnProperty.call(t,e)||(t[e]=new Promise(((t,u)=>m(void 0,void 0,void 0,(function*(){const a=n.flat.find((n=>n.route===e));if(a)try{const u="/"===a.path.charAt(0)?yield import(a.path):(0,s.isHeadless)()?yield import((0,i.k)(a.path)):"client"===a.route?yield o(67329)("./clien"+(0,i.u)(a.route).slice(5)+"/mdist/plugin"):yield o(80534)("./plugin-"+(0,i.u)(a.route)+"/mdist/plugin"),c=u.default||u,d=Object.assign({usage:n.usage,docs:n.docs},r);t(c((0,l.proxy)(e),d))}catch(n){console.error(`prequire error ${e}`,n),u(n)}else u(new Error(`Internal error: plugin ${e} not found`))})))))}catch(n){h("prequire failure",e),console.error(n)}return t[e]})),v=(e,n)=>{const o={},t=t=>m(void 0,void 0,void 0,(function*(){try{if(!t)return;return o[t]||(o[t]=new Promise(((o,r)=>m(void 0,void 0,void 0,(function*(){try{const r=e.topological[t];r&&(yield Promise.all(r.map((o=>f(o,e,n)))));const i=f(t,e,n);o(i)}catch(e){console.error(`Error resolving plugin ${t}`,e),r(e)}}))))),o[t]}finally{}}));return{isOverridden:n=>void 0!==e.overrides[n],isAlpha:(n,o)=>void 0===e.overrides[n]||e.overrides[n]===o,resolveOne:t,disambiguate:n=>e.disambiguator[n],disambiguatePartial:n=>{const o=[];if(e.disambiguator)for(const t in e.disambiguator)0===t.indexOf(n)&&o.push(t);return o},resolve:(n,{subtree:o=!1,tryCatchalls:r=!0}={})=>m(void 0,void 0,void 0,(function*(){let i,s;for(const t in e.commandToPlugin){if(t===n){i=e.commandToPlugin[t];break}(o?0===t.indexOf(n):0===n.indexOf(`${t}/`))&&(!s||t.length>s)&&(i=e.commandToPlugin[t],s=t.length)}i?yield t(i):e.catchalls.length>0&&r&&(yield Promise.all(e.catchalls.map((e=>t(e.plugin)))).catch((e=>{console.error("There seems to be an inconsistency in the prescan model versus the current state of the filesystem: the prescan model refers to a catchall that cannot currently be found",e)})))}))}};function y(e,n){return{docs:Object.assign({},e.docs,n.docs),preloads:e.preloads.concat(n.preloads),themeSets:e.themeSets.concat(n.themeSets),commandToPlugin:Object.assign({},e.commandToPlugin,n.commandToPlugin),topological:Object.assign({},e.topological,n.topological),flat:e.flat.concat(n.flat),overrides:Object.assign({},e.overrides,n.overrides),usage:Object.assign({},e.usage,n.usage),disambiguator:Object.assign({},e.disambiguator||{},n.disambiguator||{}),catchalls:e.catchalls.concat(n.catchalls)}}var b=o(8746),w=o(32518),k=function(e,n,o,t){return new(o||(o=Promise))((function(r,i){function s(e){try{u(t.next(e))}catch(e){i(e)}}function l(e){try{u(t.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?r(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,l)}u((t=t.apply(e,n||[])).next())}))};const O=r()("core/plugins");O("loading"),O("modules loaded");const P="../../../../plugins",x={};let j,M;try{M=o(64765),M&&M.commandToPlugin&&Object.keys(M.commandToPlugin).forEach(w.z)}catch(e){O(e)}function $(){return M}function C(e){O("useUpdatedUserPrescan",e,j),M=y(j,e),(0,l.setPluginResolver)(v(M,x))}const E=()=>(e=>d(void 0,void 0,void 0,(function*(){p("init");const n=Promise.all(e.preloads.map((e=>d(void 0,void 0,void 0,(function*(){try{p("preloading capabilities.1 %s",e.path);const n="/"===e.path.charAt(0)?yield import(e.path):(0,s.isHeadless)()?yield import((0,i.k)(e.path)):"client"===e.route?o(92901):yield o(8176)("./plugin-"+(0,i.u)(e.route)+"/mdist/preload");p("preloading capabilities.2 %s",e.path);const t=n.registerCapability;t&&"function"==typeof t?(yield t(new g(e.route)),p("registered capabilities %s",e.path)):p("no registered capabilities %s",e.path)}catch(n){p("error registering capabilities",e.path,n),console.error(n)}}))))).then((()=>d(void 0,void 0,void 0,(function*(){yield Promise.resolve().then(o.bind(o,42341)).then((({eventBus:e})=>{e.once("/tab/new",(e=>{void 0===e._kui_session&&(e._kui_session=Promise.resolve())}))}))})))).then((()=>Promise.all(e.preloads.map((e=>d(void 0,void 0,void 0,(function*(){try{p("preloading misc %s",e.path);const n="/"===e.path.charAt(0)?yield import(e.path):(0,s.isHeadless)()?yield import((0,i.k)(e.path)):"client"===e.route?o(92901):yield o(8176)("./plugin-"+(0,i.u)(e.route)+"/mdist/preload"),t=n.default||n;t&&"function"==typeof t&&(yield t(new g(e.route))),p("done preloading %s",e.path)}catch(n){p("error invoking preload",e.path,n),console.error(n)}})))))));try{yield n}catch(e){console.error(e)}p("done")})))(M);function I(){return k(this,void 0,void 0,(function*(){const{join:e}=yield Promise.resolve().then(o.t.bind(o,26470,23));return e((0,b.CF)(),"plugins")}))}const T=()=>k(void 0,void 0,void 0,(function*(){if(O("init"),j)return!1;if(j=M,(0,s.isHeadless)()&&M)try{const[{existsSync:e},{join:n}]=yield Promise.all([Promise.resolve().then(o.t.bind(o,12993,23)),Promise.resolve().then(o.t.bind(o,26470,23))]),t=n(yield I(),"node_modules/@kui-shell/prescan.json");if(e(t)){const e=yield o(43919)(t);M=y(M,e)}O("user-installed prescan loaded",M)}catch(e){console.error("error loading user-installed prescan",e)}return(0,l.setPluginResolver)(v(M,x)),O("init done"),!0}));O("done loading")},43919:e=>{function n(e){return Promise.resolve().then((()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=()=>[],n.resolve=n,n.id=43919,e.exports=n},92901:(e,n,o)=>{"use strict";o.r(n),o.d(n,{default:()=>r});var t=function(e,n,o,t){return new(o||(o=Promise))((function(r,i){function s(e){try{u(t.next(e))}catch(e){i(e)}}function l(e){try{u(t.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?r(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,l)}u((t=t.apply(e,n||[])).next())}))};const r=()=>t(void 0,void 0,void 0,(function*(){const{notebookVFS:e}=yield Promise.all([o.e(7025),o.e(973),o.e(8964)]).then(o.bind(o,96022));e.cp(void 0,["plugin://client/notebooks/readme.json","plugin://client/README.md"],"/kui")}))}}]);