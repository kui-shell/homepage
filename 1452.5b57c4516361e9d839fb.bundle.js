(self.webpackChunkkui_shell=self.webpackChunkkui_shell||[]).push([[1452],{96022:(e,n,t)=>{"use strict";t.r(n),t.d(n,{NotebookVFS:()=>o.NotebookVFS,notebookVFS:()=>o.default});var o=t(60973)},22631:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i,Z:()=>d});var o=t(63744),a=t(81634),c=t(26472),r=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};function i(e,n){return r(this,void 0,void 0,(function*(){const t=(yield e.REPL.qexec(`kubectl get all -n ${n} -o custom-columns=KIND:.kind`)).body.reduce(((e,{name:n})=>(e[n]=(e[n]||0)+1,e)),{});return{header:{name:"KIND",attributes:[{key:"COUNT",value:"COUNT"}]},body:Object.keys(t).map((e=>({name:e,onclick:`kubectl get ${e} -n ${n}`,attributes:[{key:"COUNT",value:t[e].toLocaleString()}]}))).sort(((e,n)=>t[n.name]-t[e.name]))}}))}function s(e){const n=e.argvNoOptions[e.argvNoOptions.length-1];return i(e.tab,n)}function u({tab:e}){return r(this,void 0,void 0,(function*(){return(yield(0,o.AF)(e)).metadata.namespace}))}const d=e=>{e.listen(`/${a.Z}/namespace/current`,u,c.L6),e.listen(`/${a.Z}/namespace/summarize`,s,c.L6)}},89492:(e,n,t)=>{"use strict";function o(e){return"IP"===e?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function a(e){return e.body.reduce(((e,n)=>(e[o(n.key)]=n.name,n.attributes.forEach((({key:n,value:t})=>{e[o(n)]=t})),e)),{})}t.d(n,{k:()=>o,Z:()=>a})},12077:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>Re});var o=t(11227),a=t.n(o),c=t(79895);const r=a()("k8s/view/util/selectors"),i=e=>{if(e.matchLabels)return i(e.matchLabels);if(e.matchExpressions)return"";const n=Object.keys(e).map((n=>`-l ${n}=${e[n]}`)).join(" ");return r("selectorToString",n,e),n};var s=t(21274),u=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};const d={when:function(e){return(0,s.Ib)(e)&&((0,s.Yc)(e)||(0,s.MN)(e)||void 0!==e.status&&void 0!==e.status.podName)},mode:{mode:"pods",label:"Pods",content:function(e,n,t){return u(this,void 0,void 0,(function*(){const{selector:o}=n.spec,a=o?`${(0,c.fY)(t)} get pods ${i(o)} -n "${n.metadata.namespace}"`:`${(0,c.fY)(t)} get pods ${n.status.podName} -n "${n.metadata.namespace}"`;return e.REPL.qexec(a)}))}}};var l=t(41653),m=t(51173),p=t(73258),f=t.n(p),h=t(89492),v=t(53156),y=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};function g({metadata:e},n=new Date){return f()(("string"==typeof n?new Date(n):n).getTime()-new Date(e.creationTimestamp).getTime())}function b(e){const{readyReplicas:n,replicas:t}=e.status;return`${n}/${t}`}var w=t(40714);const k=(0,m.i18n)("plugin-kubectl");function $(e,n){const t=n.status.addresses.find((n=>n.type===e));return t?t.address:"<none>"}function P(e){try{return parseInt(e)}catch(n){return e}}function R(e,{status:n}){return k("percentFree",w.ZP.fractionOfMemory(n.allocatable[e],n.capacity[e]))}function x(e){const{containerStatuses:n}=e.status;return`${n?n.reduce(((e,n)=>e+(n.ready?1:0)),0):0}/${n.length}`}function C(e){const{containerStatuses:n}=e.status;return n.reduce(((e,n)=>e+n.restartCount),0)}function N(e){return e.spec.readinessGates?e.spec.readinessGates.map((e=>e.conditionType||"")).join(", "):"<none>"}var j=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};const O=(0,m.i18n)("plugin-kubectl");const S={when:s.l7,mode:{mode:"summary",label:O("summary"),content:function({REPL:e},n){return j(this,void 0,void 0,(function*(){if((0,s.xS)(n))return n.summary;try{const o=t.e(3320).then(t.t.bind(t,93320,23)),a=(0,s.th)(n)?function(e){const{metadata:n,spec:t,status:o}=e;return{Name:n.name,Ready:x(e),Status:o.phase,Restarts:C(e),Age:g(e),IP:o.podIP,Node:t.nodeName,"Nominated node":t.nominatedNodeName||"<none>","Readiness gates":N(e)}}(n):(0,s.Yc)(n)?function(e){const{metadata:n,spec:t,status:o}=e,{template:{spec:{containers:a}}}=t;return{Name:n.name,Ready:b(e),"Up-to-date":o.readyReplicas||0,Available:o.availableReplicas||0,Age:g(e),Containers:a.map((e=>e.name)).join(", "),Images:a.map((e=>e.image)).join(", "),Selector:t.selector}}(n):(0,s.cO)(n)?function(e){const{metadata:n,involvedObject:t,source:o,reason:a,type:c,message:r,firstTimestamp:i,lastTimestamp:s,count:u}=e;return{"Last seen":f()(Date.now()-new Date(s).getTime()),Object:`${t.kind}/${t.name}`,Type:c,Reason:a,Subobject:t.fieldPath,Source:`${o.component||""}${o.host?(o.component?", ":"")+o.host:""}`,Message:r,"First seen":f()(Date.now()-new Date(i).getTime()),Count:u,Name:n.name}}(n):(0,s.MN)(n)?function(e){const{metadata:n,spec:t,status:o}=e,{template:{spec:{containers:a}}}=t;return{Name:n.name,Desired:o.replicas,Current:o.availableReplicas,Ready:o.readyReplicas,Age:g(e),Containers:a.map((e=>e.name)).join(", "),Images:a.map((e=>e.image)).join(", "),Selector:t.selector}}(n):(0,s.me)(n)?function(e){const{metadata:n,status:t}=e;return{Name:n.name,Status:t.phase,Age:g(e)}}(n):(0,s.UG)(n)?function(e){const{metadata:n,status:t}=e;return{Name:n.name,Age:g(e),CPUs:P(t.capacity.cpu),Memory:w.ZP.reformatAsBytes(t.capacity.memory)+` (${R("memory",e)})`,"Ephemeral Storage":w.ZP.reformatAsBytes(t.capacity["ephemeral-storage"])+` (${R("ephemeral-storage",e)})`,"External IP":$("ExternalIP",e),"Internal IP":$("InternalIP",e),"OS Image":t.nodeInfo.osImage,"Kernel Version":t.nodeInfo.kernelVersion,"Container Runtime":t.nodeInfo.containerRuntimeVersion}}(n):(0,s.Cr)(n)?function(e){const{metadata:n,spec:t,status:o}=e,{containers:a}=t.template.spec;return{Name:n.name,Completions:`${o.succeeded}/${t.completions}`,Duration:g(e,o.completionTime),Age:g(e),Containers:a.map((e=>e.image)).join(", "),Selector:t.selector}}(n):(0,s.ko)(n)?function(e){const{metadata:n,type:t,data:o}=e;return{Name:n.name,Type:t,Age:g(e),Data:o}}(n):function(e,n){return y(this,void 0,void 0,(function*(){const t=(0,v.QG)(e.originatingCommand,`kubectl get ${e.kind} ${e.metadata.name} -n ${e.metadata.namespace} -o wide`);return(0,h.Z)(yield n.qexec(t))}))}(n,e);return{content:(yield o).safeDump(yield a),contentType:"yaml"}}catch(e){return 404===e.code?O("This resource has been deleted"):(console.error(e),{content:n.kuiRawData,contentType:"yaml"})}}))},defaultMode:!0,order:-999}};var E=t(19945),I=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};const T=(0,m.i18n)("plugin-kubectl");function D(e,n,t){return I(this,void 0,void 0,(function*(){return`${(0,E.fY)(t)} get ${(0,E.kJ)(n.apiVersion,(0,m.encodeComponent)(n.kind),(0,m.encodeComponent)(n.metadata.name),(0,m.encodeComponent)(n.metadata.namespace||(yield(0,E.Yi)(e))))}`}))}const Y={when:s.MP,mode:{mode:"show-crd-resources",label:T("Show Resources"),command:D,kind:"drilldown"}};var Z=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};const V=(0,m.i18n)("plugin-kubectl"),A=a()("plugin-kubectl/view/modes/crd-summary");const L={when:s.MP,mode:{mode:"summary",label:V("summary"),content:function(e,n,o){return Z(this,void 0,void 0,(function*(){const{group:a,version:c,scope:r}=n.spec,i=n.spec.names.kind,s=r?{Scope:r}:{},u=a?{Group:a}:{},d=c?{Version:c}:{},l=i?{Kind:i}:{},m=Object.assign({},s,u,d,l),p=t.e(3320).then(t.t.bind(t,93320,23));try{const{body:t}=yield e.REPL.qexec(`${D(e,n,o)} -o custom-columns=NAME:.metadata.name`);m["Resource count"]=t.length}catch(e){A("error fetching resource count for crd",e)}return{content:(yield p).safeDump(m),contentType:"yaml"}}))},priority:10}};var M=t(21858),F=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};const B=(0,m.i18n)("plugin-kubectl");function U(e,n,t){const o=`${(0,c.fY)(t)} get ${(0,M.uE)(n)} -o wide`;return e.REPL.qexec(o).then(h.Z)}const q={when:s.O,mode:{mode:"summary",label:B("summary"),content:function(e,n,o){return F(this,void 0,void 0,(function*(){const[a,{safeDump:c}]=yield Promise.all([U(e,n,o),t.e(3320).then(t.t.bind(t,93320,23))]);if(n.data){delete a.Data;try{for(const e in n.data)"string"==typeof n.data[e]&&(a[e]=n.data[e])}catch(e){console.error("error parsing configmap data",e)}}return{content:c(a),contentType:"yaml"}}))},priority:10}};var G=t(22631);const J="resources",K=(0,m.i18n)("plugin-kubectl")(J);const Q={when:s.me,mode:{mode:J,label:K,content:function(e,n){return(0,G.Q)(e,n.metadata.name)}}};var _=t(68281),W=t(33168),z=t(68491);const H=(0,m.i18n)("plugin-kubectl");const X={when:s.k1,mode:{mode:"ownerReference",kind:"drilldown",showRelatedResource:!0,label:H("Show Owner Reference"),command:function(e,{metadata:{namespace:n,ownerReferences:[{apiVersion:t,kind:o,name:a}]}},r){return`${(0,c.fY)(r)} get ${(0,M.kJ)(t,(0,m.encodeComponent)(o),(0,m.encodeComponent)(a),(0,m.encodeComponent)(n||"default"))} -o yaml`}}},ee=(0,m.i18n)("plugin-kubectl");const ne={when:s.th,mode:{mode:"show-node",kind:"drilldown",showRelatedResource:!0,label:ee("Show Node"),command:function(e,n,t){return`${(0,c.fY)(t)} get node ${n.spec.nodeName} -o yaml`}}};var te=t(67294),oe=t(24107);const ae=(0,m.i18n)("plugin-kubectl");const ce={icon:te.createElement(oe.PJ,{icon:"Trash"}),mode:"delete",order:100,label:ae("deleteResource"),kind:"drilldown",command:function(e,n,t){return`${(0,c.fY)(t)} delete ${(0,M.uE)(n)}`},confirm:!0},re={when:s.Rt,mode:ce};var ie=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};const se=(0,m.i18n)("plugin-kubectl");const ue={when:s._E,mode:{mode:"involvedObject",label:se("Show Involved Object"),command:function(e,{involvedObject:{apiVersion:n,kind:t,name:o,namespace:a}},c){return ie(this,void 0,void 0,(function*(){return`${(0,E.fY)(c)} get ${(0,M.kJ)(n,(0,m.encodeComponent)(t),(0,m.encodeComponent)(o),(0,m.encodeComponent)(a||(yield(0,E.Yi)(e))))} -o yaml`}))},kind:"drilldown"}};var de=t(28040);const le={when:function(e){return(0,E.Rt)(e)&&!(0,de.jK)(e)},mode:{mode:"edit-button",label:(0,m.i18n)("plugin-client-common","editor")("Edit"),icon:te.createElement(oe.PJ,{icon:"Edit"}),inPlace:!0,kind:"drilldown",command:(e,n,t)=>`${(0,E.fY)(t)} edit ${(0,E.uE)(n)}`}};var me=t(52541),pe=t(54476);const fe={when:function(e){return(0,s.Rt)(e)&&!(0,s.cO)(e)&&(0,s.ri)(e)},mode:{mode:"events",label:(0,m.i18n)("plugin-kubectl")("Show Events"),kind:"drilldown",showRelatedResource:!0,command:function(e,n,t){const o=`involvedObject.apiVersion=${n.apiVersion},involvedObject.kind=${n.kind},involvedObject.name=${n.metadata.name},involvedObject.namespace=${n.metadata.namespace}`,a=[(0,c.fY)(t),"get","events","--field-selector",o,"-n",n.metadata.namespace,"-w"];return(0,v.QG)(t,a.join(" "))}}},he={when:s.cO,badge:e=>{const n=me.Z[e.reason];return{title:n?e.reason:e.type,css:n||("Error"===e.type?pe.Z.Red:"Warning"===e.type?pe.Z.Yellow:void 0)}}};var ve=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};function ye(e,n,t){return ve(this,void 0,void 0,(function*(){return(yield e.REPL.qexec(n,void 0,void 0,{raw:!0})).split(/[\n\r]/).map((e=>e.replace(/^\w+\//,""))).filter((e=>e.startsWith(t.toBeCompleted))).map((e=>e.substring(t.toBeCompleted.length)))}))}function ge(e,n=(()=>!0)){const t=e.parsedOptions;return Object.keys(t).filter(n).filter((e=>!/^(-o|--output)/.test(e))).map((e=>`${1===e.length?`-${e}`:`--${e}`} ${t[e]}`)).join(" ")}function be(e){return"attach"===e||"exec"===e||"logs"===e}function we(e){return"cordon"===e||"uncordon"===e||"drain"===e||"taint"===e}function ke(e,n,t){return ve(this,void 0,void 0,(function*(){const{argvNoOptions:o,argv:a,parsedOptions:r}=n,i=(0,c.fY)({argvNoOptions:o}),s=-1===t.toBeCompletedIdx?n.argv.length-1:t.toBeCompletedIdx-1,u=o[1];if(s>0&&("-n"===a[s]||"--namespace"===a[s])){const o=`${i} get ns ${ge(n,(e=>"-n"!==e&&"--namespace"!==e))} -o name`;return ye(e,o,t)}if(("kubectl"===o[0]||"k"===o[0]||"oc"===o[0])&&!/^-/.test(a[s])&&("get"===u||"annotate"===u||"describe"===u||"pod"===u||"edit"===u||"label"===u||be(u)||we(u)||"delete"===u&&!r.f&&!r.file)){const a=`${i} get ${be(u)?"pod":we(u)?"node":o[2]} ${ge(n)} -o name`;return ye(e,a,t)}}))}var $e=t(96022),Pe=function(e,n,t,o){return new(t||(t=Promise))((function(a,c){function r(e){try{s(o.next(e))}catch(e){c(e)}}function i(e){try{s(o.throw(e))}catch(e){c(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}))};const Re=e=>Pe(void 0,void 0,void 0,(function*(){const n=e.registerModes(d,l.ZP,S,L,q,Q,fe,_.Z,W.ZP,z.ZP,le,Y,X,ne,re,ue),t=e.registerBadges(he);$e.notebookVFS.mkdir({argvNoOptions:["mkdir","/kui/kubernetes"]}),$e.notebookVFS.cp(void 0,["plugin://plugin-kubectl/notebooks/create-jobs.json","plugin://plugin-kubectl/notebooks/crud-operations.json","plugin://plugin-kubectl/notebooks/deploy-applications.json","plugin://plugin-kubectl/notebooks/dashboard.json","plugin://plugin-kubectl/notebooks/popeye.json"],"/kui/kubernetes/");try{(0,m.registerTabCompletionEnumerator)(ke)}catch(e){a()("plugins/kubeui/preload")("error installing kubeui tab-completion extensions",e)}yield Promise.all([n,t])}))}}]);